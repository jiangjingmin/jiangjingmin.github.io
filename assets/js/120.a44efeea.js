(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{516:function(a,t,s){"use strict";s.r(t);var e=s(28),o=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"面试官-javascript本地存储的方式有哪些-区别及应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#面试官-javascript本地存储的方式有哪些-区别及应用场景"}},[a._v("#")]),a._v(" 面试官：Javascript本地存储的方式有哪些？区别及应用场景？")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://static.vue-js.com/68dccf20-849f-11eb-ab90-d9ae814b240d.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"一、方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、方式"}},[a._v("#")]),a._v(" 一、方式")]),a._v(" "),s("p",[s("code",[a._v("javaScript")]),a._v("本地缓存的方法我们主要讲述以下四种：")]),a._v(" "),s("ul",[s("li",[a._v("cookie")]),a._v(" "),s("li",[a._v("sessionStorage")]),a._v(" "),s("li",[a._v("localStorage")]),a._v(" "),s("li",[a._v("indexedDB")])]),a._v(" "),s("h3",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[a._v("#")]),a._v(" cookie")]),a._v(" "),s("p",[s("code",[a._v("Cookie")]),a._v("，类型为「小型文本文件」，指某些网站为了辨别用户身份而储存在用户本地终端上的数据。是为了解决 "),s("code",[a._v("HTTP")]),a._v("无状态导致的问题")]),a._v(" "),s("p",[a._v("作为一段一般不超过 4KB 的小型文本数据，它由一个名称（Name）、一个值（Value）和其它几个用于控制 "),s("code",[a._v("cookie")]),a._v("有效期、安全性、使用范围的可选属性组成")]),a._v(" "),s("p",[a._v("但是"),s("code",[a._v("cookie")]),a._v("在每次请求中都会被发送，如果不使用 "),s("code",[a._v("HTTPS")]),a._v("并对其加密，其保存的信息很容易被窃取，导致安全风险。举个例子，在一些使用 "),s("code",[a._v("cookie")]),a._v("保持登录态的网站上，如果 "),s("code",[a._v("cookie")]),a._v("被窃取，他人很容易利用你的 "),s("code",[a._v("cookie")]),a._v("来假扮成你登录网站")]),a._v(" "),s("p",[a._v("关于"),s("code",[a._v("cookie")]),a._v("常用的属性如下：")]),a._v(" "),s("ul",[s("li",[a._v("Expires 用于设置 Cookie 的过期时间")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("Expires"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Wed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v(" Oct "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2015")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("07")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("28")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("00")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("GMT")]),a._v("\n")])])]),s("ul",[s("li",[a._v("Max-Age 用于设置在 Cookie 失效之前需要经过的秒数（优先级比"),s("code",[a._v("Expires")]),a._v("高）")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("Max"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Age"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("604800")]),a._v("\n")])])]),s("ul",[s("li",[s("code",[a._v("Domain")]),a._v("指定了 "),s("code",[a._v("Cookie")]),a._v(" 可以送达的主机名")]),a._v(" "),s("li",[s("code",[a._v("Path")]),a._v("指定了一个 "),s("code",[a._v("URL")]),a._v("路径，这个路径必须出现在要请求的资源的路径中才可以发送 "),s("code",[a._v("Cookie")]),a._v(" 首部")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("Path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("docs   # "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("docs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("Web"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" 下的资源会带 Cookie 首部\n")])])]),s("ul",[s("li",[a._v("标记为 "),s("code",[a._v("Secure")]),a._v("的 "),s("code",[a._v("Cookie")]),a._v("只应通过被"),s("code",[a._v("HTTPS")]),a._v("协议加密过的请求发送给服务端")])]),a._v(" "),s("p",[a._v("通过上述，我们可以看到"),s("code",[a._v("cookie")]),a._v("又开始的作用并不是为了缓存而设计出来，只是借用了"),s("code",[a._v("cookie")]),a._v("的特性实现缓存")]),a._v(" "),s("p",[a._v("关于"),s("code",[a._v("cookie")]),a._v("的使用如下：")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("cookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'名字=值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("关于"),s("code",[a._v("cookie")]),a._v("的修改，首先要确定"),s("code",[a._v("domain")]),a._v("和"),s("code",[a._v("path")]),a._v("属性都是相同的才可以，其中有一个不同得时候都会创建出一个新的"),s("code",[a._v("cookie")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("Set"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Cookie"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("  # 服务端设置\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("cookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("  # 客户端设置\n")])])]),s("p",[a._v("最后"),s("code",[a._v("cookie")]),a._v("的删除，最常用的方法就是给"),s("code",[a._v("cookie")]),a._v("设置一个过期的事件，这样"),s("code",[a._v("cookie")]),a._v("过期后会被浏览器删除")]),a._v(" "),s("h3",{attrs:{id:"localstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[a._v("#")]),a._v(" localStorage")]),a._v(" "),s("p",[s("code",[a._v("HTML5")]),a._v("新方法，IE8及以上浏览器都兼容")]),a._v(" "),s("h3",{attrs:{id:"特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[a._v("#")]),a._v(" 特点")]),a._v(" "),s("ul",[s("li",[a._v("生命周期：持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的")]),a._v(" "),s("li",[a._v("存储的信息在同一域中是共享的")]),a._v(" "),s("li",[a._v("当本页操作（新增、修改、删除）了"),s("code",[a._v("localStorage")]),a._v("的时候，本页面不会触发"),s("code",[a._v("storage")]),a._v("事件,但是别的页面会触发"),s("code",[a._v("storage")]),a._v("事件。")]),a._v(" "),s("li",[a._v("大小：5M（跟浏览器厂商有关系）")]),a._v(" "),s("li",[s("code",[a._v("localStorage")]),a._v("本质上是对字符串的读取，如果存储内容多的话会消耗内存空间，会导致页面变卡")]),a._v(" "),s("li",[a._v("受同源策略的限制")])]),a._v(" "),s("p",[a._v("下面再看看关于"),s("code",[a._v("localStorage")]),a._v("的使用")]),a._v(" "),s("p",[a._v("设置")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'username'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'cfangxu'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("获取")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'username'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("获取键名")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//获取第一个键名")]),a._v("\n")])])]),s("p",[a._v("删除")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'username'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("一次性清除所有存储")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[s("code",[a._v("localStorage")]),a._v(" 也不是完美的，它有两个缺点：")]),a._v(" "),s("ul",[s("li",[a._v("无法像"),s("code",[a._v("Cookie")]),a._v("一样设置过期时间")]),a._v(" "),s("li",[a._v("只能存入字符串，无法直接存对象")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// '[object, Object]'")]),a._v("\n")])])]),s("h3",{attrs:{id:"sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[a._v("#")]),a._v(" sessionStorage")]),a._v(" "),s("p",[s("code",[a._v("sessionStorage")]),a._v("和 "),s("code",[a._v("localStorage")]),a._v("使用方法基本一致，唯一不同的是生命周期，一旦页面（会话）关闭，"),s("code",[a._v("sessionStorage")]),a._v(" 将会删除数据")]),a._v(" "),s("h3",{attrs:{id:"扩展的前端存储方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展的前端存储方式"}},[a._v("#")]),a._v(" 扩展的前端存储方式")]),a._v(" "),s("p",[s("code",[a._v("indexedDB")]),a._v("是一种低级API，用于客户端存储大量结构化数据(包括, 文件/ blobs)。该API使用索引来实现对该数据的高性能搜索")]),a._v(" "),s("p",[a._v("虽然 "),s("code",[a._v("Web Storage")]),a._v("对于存储较少量的数据很有用，但对于存储更大量的结构化数据来说，这种方法不太有用。"),s("code",[a._v("IndexedDB")]),a._v("提供了一个解决方案")]),a._v(" "),s("h4",{attrs:{id:"优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[a._v("#")]),a._v(" 优点：")]),a._v(" "),s("ul",[s("li",[a._v("储存量理论上没有上限")]),a._v(" "),s("li",[a._v("所有操作都是异步的，相比 "),s("code",[a._v("LocalStorage")]),a._v(" 同步操作性能更高，尤其是数据量较大时")]),a._v(" "),s("li",[a._v("原生支持储存"),s("code",[a._v("JS")]),a._v("的对象")]),a._v(" "),s("li",[a._v("是个正经的数据库，意味着数据库能干的事它都能干")])]),a._v(" "),s("h4",{attrs:{id:"缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[a._v("#")]),a._v(" 缺点：")]),a._v(" "),s("ul",[s("li",[a._v("操作非常繁琐")]),a._v(" "),s("li",[a._v("本身有一定门槛")])]),a._v(" "),s("p",[a._v("关于"),s("code",[a._v("indexedDB")]),a._v("的使用基本使用步骤如下：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("打开数据库并且开始一个事务")])]),a._v(" "),s("li",[s("p",[a._v("创建一个 "),s("code",[a._v("object store")])])]),a._v(" "),s("li",[s("p",[a._v("构建一个请求来执行一些数据库操作，像增加或提取数据等。")])]),a._v(" "),s("li",[s("p",[a._v("通过监听正确类型的 "),s("code",[a._v("DOM")]),a._v(" 事件以等待操作完成。")])]),a._v(" "),s("li",[s("p",[a._v("在操作结果上进行一些操作（可以在 "),s("code",[a._v("request")]),a._v("对象中找到）")])])]),a._v(" "),s("p",[a._v("关于使用"),s("code",[a._v("indexdb")]),a._v("的使用会比较繁琐，大家可以通过使用"),s("code",[a._v("Godb.js")]),a._v("库进行缓存，最大化的降低操作难度")]),a._v(" "),s("h2",{attrs:{id:"二、区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、区别"}},[a._v("#")]),a._v(" 二、区别")]),a._v(" "),s("p",[a._v("关于"),s("code",[a._v("cookie")]),a._v("、"),s("code",[a._v("sessionStorage")]),a._v("、"),s("code",[a._v("localStorage")]),a._v("三者的区别主要如下：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("存储大小："),s("code",[a._v("cookie")]),a._v("数据大小不能超过"),s("code",[a._v("4k")]),a._v("，"),s("code",[a._v("sessionStorage")]),a._v("和"),s("code",[a._v("localStorage")]),a._v("虽然也有存储大小的限制，但比"),s("code",[a._v("cookie")]),a._v("大得多，可以达到5M或更大")])]),a._v(" "),s("li",[s("p",[a._v("有效时间："),s("code",[a._v("localStorage")]),a._v("存储持久数据，浏览器关闭后数据不丢失除非主动删除数据； "),s("code",[a._v("sessionStorage")]),a._v("数据在当前浏览器窗口关闭后自动删除；"),s("code",[a._v("cookie")]),a._v("设置的"),s("code",[a._v("cookie")]),a._v("过期时间之前一直有效，即使窗口或浏览器关闭")])]),a._v(" "),s("li",[s("p",[a._v("数据与服务器之间的交互方式，"),s("code",[a._v("cookie")]),a._v("的数据会自动的传递到服务器，服务器端也可以写"),s("code",[a._v("cookie")]),a._v("到客户端； "),s("code",[a._v("sessionStorage")]),a._v("和"),s("code",[a._v("localStorage")]),a._v("不会自动把数据发给服务器，仅在本地保存")])])]),a._v(" "),s("h2",{attrs:{id:"三、应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、应用场景"}},[a._v("#")]),a._v(" 三、应用场景")]),a._v(" "),s("p",[a._v("在了解了上述的前端的缓存方式后，我们可以看看针对不对场景的使用选择：")]),a._v(" "),s("ul",[s("li",[a._v("标记用户与跟踪用户行为的情况，推荐使用"),s("code",[a._v("cookie")])]),a._v(" "),s("li",[a._v("适合长期保存在本地的数据（令牌），推荐使用"),s("code",[a._v("localStorage")])]),a._v(" "),s("li",[a._v("敏感账号一次性登录，推荐使用"),s("code",[a._v("sessionStorage")])]),a._v(" "),s("li",[a._v("存储大量数据的情况、在线文档（富文本编辑器）保存编辑历史的情况，推荐使用"),s("code",[a._v("indexedDB")])])]),a._v(" "),s("h2",{attrs:{id:"相关连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关连接"}},[a._v("#")]),a._v(" 相关连接")]),a._v(" "),s("ul",[s("li",[a._v("https://mp.weixin.qq.com/s/mROjtpoXarN--UDfEMqwhQ")]),a._v(" "),s("li",[a._v("https://github.com/chenstarx/GoDB.js")])])])}),[],!1,null,null,null);t.default=o.exports}}]);