<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><meta name="keyworks" content="档案馆,物流,北京到上海"><title>页面从输入URL到页面加载显示完成，这个过程中都发生了什么？ | 前端面试档案馆</title><meta name="description" content="Frontend 前端面试档案馆">
    <link rel="modulepreload" href="/assets/app.f6b3af9d.js"><link rel="modulepreload" href="/assets/after_url.html.3f187d94.js"><link rel="modulepreload" href="/assets/after_url.html.0065acc5.js">
    <link rel="stylesheet" href="/assets/style.39d5bbe5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="前端面试档案馆"><span class="site-name can-hide">前端面试档案馆</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/posts/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/fe/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/be/" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/base/" class="router-link-active" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/resume/" class="" aria-label="简历"><!--[--><!--]--> 简历 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/experience/" class="" aria-label="面经"><!--[--><!--]--> 面经 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/tools/" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/posts/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/fe/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/be/" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/base/" class="router-link-active" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/resume/" class="" aria-label="简历"><!--[--><!--]--> 简历 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/experience/" class="" aria-label="面经"><!--[--><!--]--> 面经 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/posts/tools/" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">算法 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/posts/base/algorithm/" class="sidebar-item" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/algorithm/array.html" class="sidebar-item" aria-label="数组相关算法"><!--[--><!--]--> 数组相关算法 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">HTTP <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/posts/base/http/" class="router-link-active sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/1.0_1.1_2.0.html" class="sidebar-item" aria-label="HTTP 1.0/1.1/2.0"><!--[--><!--]--> HTTP 1.0/1.1/2.0 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="页面从输入URL到页面加载显示完成，这个过程中都发生了什么？"><!--[--><!--]--> 页面从输入URL到页面加载显示完成，这个过程中都发生了什么？ <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/posts/base/http/after_url.html#一、简单分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="一、简单分析"><!--[--><!--]--> 一、简单分析 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/posts/base/http/after_url.html#简述" class="router-link-active router-link-exact-active sidebar-item" aria-label="简述"><!--[--><!--]--> 简述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#其他答案-页面从输入url到页面加载显示完成-这个过程中都发生了什么-流程说的越详细越好" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他答案：页面从输入URL到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）"><!--[--><!--]--> 其他答案：页面从输入URL到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#八股文-浏览器从输入-url-到页面加载的全过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="八股文：浏览器从输入 URL 到页面加载的全过程"><!--[--><!--]--> 八股文：浏览器从输入 URL 到页面加载的全过程 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/posts/base/http/after_url.html#二、详细分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="二、详细分析"><!--[--><!--]--> 二、详细分析 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/posts/base/http/after_url.html#url-解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="URL 解析"><!--[--><!--]--> URL 解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#dns-查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="DNS 查询"><!--[--><!--]--> DNS 查询 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#tcp-连接" class="router-link-active router-link-exact-active sidebar-item" aria-label="TCP 连接"><!--[--><!--]--> TCP 连接 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#发送-http-请求" class="router-link-active router-link-exact-active sidebar-item" aria-label="发送 http 请求"><!--[--><!--]--> 发送 http 请求 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#响应请求" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应请求"><!--[--><!--]--> 响应请求 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#页面渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="页面渲染"><!--[--><!--]--> 页面渲染 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/posts/base/http/after_url.html#其他答案" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他答案"><!--[--><!--]--> 其他答案 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/posts/base/http/after_url.html#参考文献" class="router-link-active router-link-exact-active sidebar-item" aria-label="参考文献"><!--[--><!--]--> 参考文献 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/posts/base/http/CDN.html" class="sidebar-item" aria-label="CDN"><!--[--><!--]--> CDN <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/cookie_session.html" class="sidebar-item" aria-label="浏览器的 cookie 和服务端的 session 有什么区别"><!--[--><!--]--> 浏览器的 cookie 和服务端的 session 有什么区别 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/cross_domain.html" class="sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/DNS.html" class="sidebar-item" aria-label="DNS 协议"><!--[--><!--]--> DNS 协议 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/GET_POST.html" class="sidebar-item" aria-label="GET 和 POST 请求"><!--[--><!--]--> GET 和 POST 请求 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/handshakes_waves.html" class="sidebar-item" aria-label="三次握手和四次挥手"><!--[--><!--]--> 三次握手和四次挥手 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/headers.html" class="sidebar-item" aria-label="HTTP 常见的请求头"><!--[--><!--]--> HTTP 常见的请求头 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/HTTPS.html" class="sidebar-item" aria-label="HTTPS 是如何保证安全的"><!--[--><!--]--> HTTPS 是如何保证安全的 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/mobile.html" class="sidebar-item" aria-label="fastclick 解决移动端click事件300ms延迟问题"><!--[--><!--]--> fastclick 解决移动端click事件300ms延迟问题 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/OSI.html" class="sidebar-item" aria-label="OSI"><!--[--><!--]--> OSI <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/repaint_reflow.html" class="sidebar-item" aria-label="重绘（Repaint）和回流/重排（Reflow）"><!--[--><!--]--> 重绘（Repaint）和回流/重排（Reflow） <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/security.html" class="sidebar-item" aria-label="XSS 和 CSRF"><!--[--><!--]--> XSS 和 CSRF <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/status.html" class="sidebar-item" aria-label="HTTP 状态码"><!--[--><!--]--> HTTP 状态码 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/TCP_IP.html" class="sidebar-item" aria-label="TCP/IP协议"><!--[--><!--]--> TCP/IP协议 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/UDP_TCP.html" class="sidebar-item" aria-label="UDP、TCP区别"><!--[--><!--]--> UDP、TCP区别 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/http/WebSocket.html" class="sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Linux <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/posts/base/linux/" class="sidebar-item" aria-label="操作系统"><!--[--><!--]--> 操作系统 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/file.html" class="sidebar-item" aria-label="linux系统下 文件操作常用的命令有哪些？"><!--[--><!--]--> linux系统下 文件操作常用的命令有哪些？ <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/linux%20users.html" class="sidebar-item" aria-label="linux 用户管理"><!--[--><!--]--> linux 用户管理 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/redirect_pipe.html" class="sidebar-item" aria-label="输入输出重定向和管道"><!--[--><!--]--> 输入输出重定向和管道 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/shell.html" class="sidebar-item" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/thread_process.html" class="sidebar-item" aria-label="进程和线程"><!--[--><!--]--> 进程和线程 <!--[--><!--]--></a><!----></li><li><a href="/posts/base/linux/vim.html" class="sidebar-item" aria-label="Vim 文本编辑"><!--[--><!--]--> Vim 文本编辑 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="页面从输入url到页面加载显示完成-这个过程中都发生了什么" tabindex="-1"><a class="header-anchor" href="#页面从输入url到页面加载显示完成-这个过程中都发生了什么" aria-hidden="true">#</a> 页面从输入URL到页面加载显示完成，这个过程中都发生了什么？</h1><p><img src="/assets/after_url_00.2bad24ab.png" alt="00"></p><ul><li>简单：IP/TCP连接，html、css、JavaScript加载，资源加载完成，浏览器渲染完成</li><li>中级：域名解析、IP/TCP连接，https加密链路，CSS渲染引擎/JSCore渲染引擎，接口、资源缓存。浏览器渲染完成。</li><li>高级：域名解析、DNS缓存，HTTP缓存，https多路复用，nginx转发，css栅格化图像合成，GPU渲染加速，jscore、webworker子线程渲染，资源拆分、缓存，离线缓存。</li><li>资深：除了上述要求，需理解FP、FCP、TTI、LCP、FMP概念，并让页面极致渲染优化。</li></ul><h2 id="一、简单分析" tabindex="-1"><a class="header-anchor" href="#一、简单分析" aria-hidden="true">#</a> 一、简单分析</h2><p>简单的分析，从输入 <code>URL</code>到回车后发生的行为如下：</p><ul><li>URL 解析</li><li>DNS 查询</li><li>TCP 连接</li><li>HTTP 请求</li><li>响应请求</li><li>页面渲染</li></ul><h3 id="简述" tabindex="-1"><a class="header-anchor" href="#简述" aria-hidden="true">#</a> 简述</h3><p>（1）通过DNS进行域名解析得到域名映射的IP地址 （2）向此IP地址发起TCP的3次握手，取得连接 （3）建立TCP连接后发起http请求 （4）服务器响应http请求，浏览器得到html代码 （5）浏览器解析html代码，并请求html代码中的资源（如 js、css、图片等） （6）浏览器对页面进行渲染，最终呈现给用户</p><h3 id="其他答案-页面从输入url到页面加载显示完成-这个过程中都发生了什么-流程说的越详细越好" tabindex="-1"><a class="header-anchor" href="#其他答案-页面从输入url到页面加载显示完成-这个过程中都发生了什么-流程说的越详细越好" aria-hidden="true">#</a> 其他答案：页面从输入URL到页面加载显示完成，这个过程中都发生了什么？（流程说的越详细越好）</h3><p>1.输入域名地址</p><p>2.发送至DNS服务器并获得域名对应的WEB服务器IP地址；</p><p>3.与WEB服务器建立TCP连接；</p><p>4.服务器的永久重定向响应（从 网页链接到 网页链接）</p><p>5.浏览器跟踪重定向地址</p><p>6.服务器处理请求</p><p>7.服务器返回一个HTTP响应</p><p>8.浏览器显示 HTML</p><p>9.浏览器发送请求获取的资源（如图片、音频、视频、CSS、JS等等）</p><p>10.浏览器发送异步请求</p><h3 id="八股文-浏览器从输入-url-到页面加载的全过程" tabindex="-1"><a class="header-anchor" href="#八股文-浏览器从输入-url-到页面加载的全过程" aria-hidden="true">#</a> 八股文：浏览器从输入 URL 到页面加载的全过程</h3><p><img src="/assets/after_url_09.f734d7ef.jpg" alt="从输入URL到页面加载的主干流程"></p><ol><li><p>首先在浏览器中输入 URL</p></li><li><p>查找缓存：浏览器先查看浏览器缓存-系统缓存-路由缓存中是否有该地址页面，如果有则显示页面内容。如果没有则进行下一步。</p><ul><li>浏览器缓存：浏览器会记录 DNS 一段时间，因此，只是第一个地方解析 DNS 请求；</li><li>操作系统缓存:如果在浏览器缓存中不包含这个记录，则会使系统调用操作系统，获取操作系统的记录(保存最近的 DNS 查询缓存)；</li><li>路由器缓存：如果上述两个步骤均不能成功获取 DNS 记录，继续搜索路由器缓存；</li><li>ISP 缓存：若上述均失败，继续向 ISP 搜索。</li></ul></li><li><p>DNS 域名解析：浏览器向 DNS 服务器发起请求，解析该 URL 中的域名对应的 IP 地址。<code>DNS服务器是基于UDP的，因此会用到UDP协议。</code>。</p></li><li><p>建立 TCP 连接：解析出 IP 地址后，根据 IP 地址和默认 80 端口，和服务器建立 TCP 连接</p></li><li><p>发起 HTTP 请求：浏览器发起读取文件的 HTTP 请求，该请求报文作为 TCP 三次握手的第三次数据发送给服务器</p></li><li><p>服务器响应请求并返回结果：服务器对浏览器请求做出响应，并把对应的 html 文件发送给浏览器</p></li><li><p>关闭 TCP 连接：通过四次挥手释放 TCP 连接</p></li><li><p>浏览器渲染：客户端（浏览器）解析 HTML 内容并渲染出来，浏览器接收到数据包后的解析流程为：</p><ul><li>构建 DOM 树：词法分析然后解析成 DOM 树（dom tree），是由 dom 元素及属性节点组成，树的根是 document 对象</li><li>构建 CSS 规则树：生成 CSS 规则树（CSS Rule Tree）</li><li>构建 render 树：Web 浏览器将 DOM 和 CSSOM 结合，并构建出渲染树（render tree）</li><li>布局（Layout）：计算出每个节点在屏幕中的位置</li><li>绘制（Painting）：即遍历 render 树，并使用 UI 后端层绘制每个节点。</li></ul></li><li><p>JS 引擎解析过程：调用 JS 引擎执行 JS 代码（JS 的解释阶段，预处理阶段，执行阶段生成执行上下文，VO，作用域链、回收机制等等）</p><ul><li>创建 window 对象：window 对象也叫全局执行环境，当页面产生时就被创建，所有的全局变量和函数都属于 window 的属性和方法，而 DOM Tree 也会映射在 window 的 doucment 对象上。当关闭网页或者关闭浏览器时，全局执行环境会被销毁。</li><li>加载文件：完成 js 引擎分析它的语法与词法是否合法，如果合法进入预编译</li><li>预编译：在预编译的过程中，浏览器会寻找全局变量声明，把它作为 window 的属性加入到 window 对象中，并给变量赋值为&#39;undefined&#39;；寻找全局函数声明，把它作为 window 的方法加入到 window 对象中，并将函数体赋值给他（匿名函数是不参与预编译的，因为它是变量）。而变量提升作为不合理的地方在 ES6 中已经解决了，函数提升还存在。</li><li>解释执行：执行到变量就赋值，如果变量没有被定义，也就没有被预编译直接赋值，在 ES5 非严格模式下这个变量会成为 window 的一个属性，也就是成为全局变量。string、int 这样的值就是直接把值放在变量的存储空间里，object 对象就是把指针指向变量的存储空间。函数执行，就将函数的环境推入一个环境的栈中，执行完成后再弹出，控制权交还给之前的环境。JS 作用域其实就是这样的执行流机制实现的。</li></ul></li></ol><h2 id="二、详细分析" tabindex="-1"><a class="header-anchor" href="#二、详细分析" aria-hidden="true">#</a> 二、详细分析</h2><h3 id="url-解析" tabindex="-1"><a class="header-anchor" href="#url-解析" aria-hidden="true">#</a> URL 解析</h3><p>首先判断你输入的是一个合法的 <code>URL</code> 还是一个待搜索的关键词，并且根据你输入的内容进行对应操作</p><p><code>URL</code>的解析第过程中的第一步，一个<code>url</code>的结构解析如下：</p><p><img src="/assets/after_url_01.96531114.png" alt="01"></p><h3 id="dns-查询" tabindex="-1"><a class="header-anchor" href="#dns-查询" aria-hidden="true">#</a> DNS 查询</h3><p>在之前文章中讲过<code>DNS</code>的查询，这里就不再讲述了</p><p>整个查询过程如下图所示：</p><p><img src="/assets/after_url_02.d5cc4be3.png" alt="02"></p><p>最终，获取到了域名对应的目标服务器<code>IP</code>地址</p><h3 id="tcp-连接" tabindex="-1"><a class="header-anchor" href="#tcp-连接" aria-hidden="true">#</a> TCP 连接</h3><p>在之前文章中，了解到<code>tcp</code>是一种面向有连接的传输层协议</p><p>在确定目标服务器服务器的<code>IP</code>地址后，则经历<a href="/posts/base/http/handshakes_waves.html" class="">三次握手</a>建立<code>TCP</code>连接，流程如下：</p><p><img src="/assets/after_url_03.4d95b78e.png" alt="03"></p><h3 id="发送-http-请求" tabindex="-1"><a class="header-anchor" href="#发送-http-请求" aria-hidden="true">#</a> 发送 http 请求</h3><p>当建立<code>tcp</code>连接之后，就可以在这基础上进行通信，浏览器发送 <code>http</code> 请求到目标服务器</p><p>请求的内容包括：</p><ul><li>请求行</li><li>请求头</li><li>请求主体</li></ul><p><img src="/assets/after_url_04.14a75581.png" alt="04"></p><h3 id="响应请求" tabindex="-1"><a class="header-anchor" href="#响应请求" aria-hidden="true">#</a> 响应请求</h3><p>当服务器接收到浏览器的请求之后，就会进行逻辑操作，处理完成之后返回一个<code>HTTP</code>响应消息，包括：</p><ul><li>状态行</li><li>响应头</li><li>响应正文</li></ul><p><img src="/assets/after_url_05.95c58b45.png" alt="05"></p><p>在服务器响应之后，由于现在<code>http</code>默认开始长连接<code>keep-alive</code>，当页面关闭之后，<code>tcp</code>链接则会经过<a href="/posts/base/http/handshakes_waves.html" class="">四次挥手</a>完成断开</p><h3 id="页面渲染" tabindex="-1"><a class="header-anchor" href="#页面渲染" aria-hidden="true">#</a> 页面渲染</h3><p>当浏览器接收到服务器响应的资源后，首先会对资源进行解析：</p><ul><li>查看响应头的信息，根据不同的指示做对应处理，比如重定向，存储 cookie，解压 gzip，缓存资源等等</li><li>查看响应头的 Content-Type 的值，根据不同的资源类型采用不同的解析方式</li></ul><p>关于页面的渲染过程如下：</p><ul><li>解析 HTML，构建 DOM 树</li><li>解析 CSS ，生成 CSS 规则树</li><li>合并 DOM 树和 CSS 规则，生成 render 树</li><li>布局 render 树（ Layout / reflow 回流），负责各元素尺寸、位置的计算</li><li>绘制 render 树（ paint 重绘），绘制页面像素信息</li><li>浏览器会将各层的信息发送给 GPU，GPU 会将各层合成（ composite ），显示在屏幕上</li><li>期间如果遇到 js，会阻塞后续渲染，等执行完 js 后再回来继续渲染，异步 js 除外</li></ul><p><img src="/assets/after_url_06.b214366f.png" alt="06"><img src="/assets/after_url_07.5fc6295b.png" alt="07"><img src="/assets/after_url_08.7b583a98.png" alt="08"></p><h2 id="其他答案" tabindex="-1"><a class="header-anchor" href="#其他答案" aria-hidden="true">#</a> 其他答案</h2><p>从输入URL到渲染出整个页面的过程包括三个部分： 1、DNS解析URL的过程 2、浏览器发送请求与服务器交互的过程 3、浏览器对接收到的html页面渲染的过程</p><p>一、DNS解析URL的过程</p><pre><code>  DNS解析的过程就是寻找哪个服务器上有请求的资源。因为ip地址不容易记忆，一般会使用URL域名（如www.baidu.com）作为网址。DNS解析就是将域名翻译成IP地址的过程。
</code></pre><p>具体过程：</p><pre><code>   1）浏览器缓存：浏览器会按照一定的频率 缓存DNS记录
</code></pre><p>2）操作系统缓存：如果浏览器缓存中找不到需要的DNS记录，就会取操作系统中找</p><p>3）路由缓存：路由器也有DNS缓存</p><p>4）ISP的DNS服务器：ISP有专门的DNS服务器应对DNS查询请求</p><p>5）根服务器：ISP的DNS服务器找不到之后，就要向根服务器发出请求，进行递归查询</p><p>二、浏览器与服务器交互过程</p><p>1）首先浏览器利用tcp协议通过三次握手与服务器建立连接</p><p>http请求包括header和body。header中包括请求的方式（get和post）、请求的协议 （http、https、ftp）、请求的地址ip、缓存cookie。body中有请求的内容。</p><p>2）浏览器根据解析到的IP地址和端口号发起http的get请求.</p><p>3）服务器接收到http请求之后，开始搜索html页面，并使用http返回响应报文</p><p>4）若状态码为200显示响应成功，浏览器接收到返回的html页面之后，开始进行页面的渲染</p><p>三、浏览器页面渲染过程</p><p>1）浏览器根据深度遍历的方式把html节点遍历成dom 树</p><p>2）将css解析成CSS DOM树</p><p>3）将dom树和CSS DOM树构造成render树</p><p>4）JS根据得到的render树 计算所有节点在屏幕中的位置，进行布局（回流）</p><p>5）遍历render树并调用硬件API绘制所有节点（重绘）</p><pre><code> 补充： 构造render渲染树的过程
</code></pre><p>从DOM树的根节点开始遍历每个可见的节点。 对于每个可见的节点，找到CSS树中的对应的规则，并且应用他们。 根据每个可见的节点及其对应的样式，组合生成渲染树。</p><h2 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献" aria-hidden="true">#</a> 参考文献</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/80551769" target="_blank" rel="noopener noreferrer">在浏览器输入 URL 回车之后发生了什么（超详细版） - 知乎 (zhihu.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://segmentfault.com/a/1190000010298038" target="_blank" rel="noopener noreferrer">浏览器渲染页面过程与页面优化 - SegmentFault 思否<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://www.dailichun.com/2018/03/12/whenyouenteraurl.html" target="_blank" rel="noopener noreferrer">从输入 URL 到页面加载的过程？如何由一道题完善自己的前端知识体系！ | Dailc 的个人主页 (dailichun.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: jingmin.jiang@cloudminds.com">jiangjingmin</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: jingmin.jiang@cloudminds.com">jingmin.jiang</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 18811465085@163.com">jiangjingmin</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 1143480553@qq.com">kyxiao</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/posts/base/http/1.0_1.1_2.0.html" class="" aria-label="HTTP 1.0/1.1/2.0"><!--[--><!--]--> HTTP 1.0/1.1/2.0 <!--[--><!--]--></a></span><span class="next"><a href="/posts/base/http/CDN.html" class="" aria-label="CDN"><!--[--><!--]--> CDN <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.f6b3af9d.js" defer></script>
  </body>
</html>
